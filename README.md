# 物聯網七段顯示器項目

## 概述
此項目展示了如何使用 MQTT 協議控制七段顯示器模組。系統實現了即時監控 CPU 使用率並將數據顯示在七段顯示器上的功能。本項目包含一個用於發布 CPU 使用率的發送端程式以及一個訂閱數據並控制顯示器的接收端程式。

---

## 目錄
- [項目組件](#項目組件)
- [設置](#設置)
- [使用方法](#使用方法)
- [檔案概覽](#檔案概覽)

---

## 項目組件
1. **硬件**：
   - ESP32 微控制器
   - 七段顯示器（共陽極型）
   - Wi-Fi 網絡

2. **軟件**：
   - 用於發送端的 Python 程式（PC 端）
   - 用於接收端的 MicroPython 程式（ESP32 端）

---

## 設置

### 硬件配置
- 將七段顯示器的引腳（a-g, dp）連接到指定的 ESP32 GPIO 引腳。
- 將共陽極引腳（COM）通過限流電阻連接到電源。
- 確保 ESP32 連接到穩定的 Wi-Fi 網絡。

### 軟件要求
- Python 3.x（用於發送端程式）
- 安裝 MicroPython 固件的 ESP32
- 必須的庫：
  - `paho.mqtt`（用於發送端）
  - `umqtt.simple`（用於接收端）
  - 自定義 `PyScriptTools`（用於監控 CPU 使用率）

---

## 使用方法

### 1. 發送端程式（PC 端）
- 運行 `mqtt.py` 腳本以監控並將 CPU 使用率發布到 MQTT broker。
- 執行命令：
  ```bash
  python mqtt.py
  ```
- 預期輸出：
  - 每秒向主題 `"XIANGYU"` 發布 CPU 使用率數據。

### 2. 接收端程式（ESP32 端）
- 將 `mqtt7seg.py` 腳本上傳到 ESP32 並執行。
- ESP32 將訂閱主題 `"XIANGYU"`，處理收到的數據，並根據數據更新七段顯示器。

---

## 檔案概覽

### 1. `mqtt.py`
- 作用：監控 CPU 使用率並將數據發送到 MQTT broker。
- 主要功能：
  - 使用 `PyScriptTools` 提取 CPU 使用率。
  - 將 CPU 使用率以整數形式發布（例如：`70` 表示 70%）。

### 2. `mqtt7seg.py`
- 作用：接收數據並控制七段顯示器。
- 主要功能：
  - 連接到 Wi-Fi 和 MQTT broker。
  - 解析收到的數據並通過陣列將其映射到顯示數字。
  - 通過 GPIO 引腳控制顯示。

### 3. `物聯網期中報告.pptx`
- 簡介：展示了項目的背景、方法論和實現細節的簡報文件。

---


